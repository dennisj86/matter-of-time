<%= render 'shared/header' %>
<div class= "container">
  <div class="messages-container">
    <div class="message-overview">
      <% @bookings.each do |booking| %>
      <div class="message-preview">
        <div class="user-info">
          <div class="user"><%= link_to booking.user.first_name, booking_messages_path(booking.id) %></div>
          <div class="date"><%= booking.created_at %></div>
        </div>
        <div class="message-title"> <%= booking.market.title %> </div>
      </div>
      <% end %>
    </div>
    <div class="chat">
      <div class="messages">
        <% @booking.messages.all.each do |message| %>
        <% if message.user == current_user %>
        <div id="chat-right">
          <div><%= message.user.first_name %></div><div><%= message.created_at %></div>
          <br>
          <div><%= message.content %></div>
        </div>
        <% else %>
        <div id="chat-left">
          <div><%= message.user.first_name %></div><div><%= message.created_at %></div>
          <br>
          <div><%= message.content %></div>
          <br>
        </div>

        <% end %>
        <br>
        <% end %>
      </div>
      <%= simple_form_for [ @booking, @message ], remote: true do |f| %>
        <%= f.input :content, label: false, placeholder: "Start to chat!" %>

      <div class="handshake">
        <%= link_to "#" do %>
            <i class="fas fa-hands-helping btn-solid-red"> Handshake</i>
        <% end %>
        <%= f.button :submit, class: 'btn-line-red'  %>
      </div>
      <% end %>
    </div>
    </div>
  </div>
</div>
<div class="bottom"></div>
